(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{238:function(e,t,n){var content=n(266);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(23).default)("3a537156",content,!0,{sourceMap:!1})},239:function(e,t,n){var content=n(268);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(23).default)("4a5fb0c1",content,!0,{sourceMap:!1})},265:function(e,t,n){"use strict";var o=n(238);n.n(o).a},266:function(e,t,n){(e.exports=n(22)(!1)).push([e.i,".text-light-transition{transition:color 2s}@-webkit-keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.page-enter-active,.page-leave-active{transition:opacity .3s ease}.page-enter{opacity:0}.page-enter-to{opacity:1}.page-leave,.page-leave-to{opacity:0}*{font-family:Open Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif}body,html{scroll-behavior:smooth}h1{font-size:2em;font-weight:700}.highlight-disable{-webkit-tap-highlight-color:rgba(0,0,0,0)}.remove-scrollbar::-webkit-scrollbar{width:0;height:0;background:transparent}",""])},267:function(e,t,n){"use strict";var o=n(239);n.n(o).a},268:function(e,t,n){(e.exports=n(22)(!1)).push([e.i,".text-light-transition[data-v-11f4c692]{transition:color 2s}@-webkit-keyframes fadeIn-data-v-11f4c692{0%{opacity:0}to{opacity:1}}@keyframes fadeIn-data-v-11f4c692{0%{opacity:0}to{opacity:1}}.page-enter-active[data-v-11f4c692],.page-leave-active[data-v-11f4c692]{transition:opacity .3s ease}.page-enter[data-v-11f4c692]{opacity:0}.page-enter-to[data-v-11f4c692]{opacity:1}.page-leave[data-v-11f4c692],.page-leave-to[data-v-11f4c692]{opacity:0}*[data-v-11f4c692]{font-family:Open Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif}body[data-v-11f4c692],html[data-v-11f4c692]{scroll-behavior:smooth}h1[data-v-11f4c692]{font-size:2em;font-weight:700}.highlight-disable[data-v-11f4c692]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.bg-chat[data-v-11f4c692]{background:#167ef6}.bg-message[data-v-11f4c692]{background-color:azure}.form-bg[data-v-11f4c692]{background:#167ef6}.bg-green-light[data-v-11f4c692]{background:#38c172}.dot[data-v-11f4c692]{width:11px;height:8px;margin-left:10px;margin-top:2px}.dot[data-v-11f4c692],.send-button[data-v-11f4c692]{border-radius:9999px}.send-button[data-v-11f4c692]{background-color:#009cf5;margin-right:1px;padding-left:.75rem;padding-right:.75rem;flex-shrink:0;color:#fff}.list-enter-active[data-v-11f4c692],.list-leave-active[data-v-11f4c692]{transition:all .8s}.list-enter[data-v-11f4c692]:not(.justify-end),.list-leave-to[data-v-11f4c692]:not(.justify-end){opacity:0;transform:translateX(-30px)}.list-enter.justify-end[data-v-11f4c692],.list-leave-to.justify-end[data-v-11f4c692]{opacity:0;transform:translateX(30px)}#scroller *[data-v-11f4c692]{overflow-anchor:none}.typing-dots[data-v-11f4c692]{display:flex;grid-gap:4px;gap:4px;align-items:center;padding:5px 0}.typing-dots .dot[data-v-11f4c692]{width:8px;height:8px;border-radius:50%;background:#009cf5;-webkit-animation:bounce-data-v-11f4c692 1.4s ease-in-out infinite;animation:bounce-data-v-11f4c692 1.4s ease-in-out infinite;margin:0}.typing-dots .dot[data-v-11f4c692]:first-child{-webkit-animation-delay:-.32s;animation-delay:-.32s}.typing-dots .dot[data-v-11f4c692]:nth-child(2){-webkit-animation-delay:-.16s;animation-delay:-.16s}.typing-dots .dot[data-v-11f4c692]:nth-child(3){-webkit-animation-delay:0s;animation-delay:0s}@-webkit-keyframes bounce-data-v-11f4c692{0%,80%,to{transform:scale(.8);opacity:.5}40%{transform:scale(1);opacity:1}}@keyframes bounce-data-v-11f4c692{0%,80%,to{transform:scale(.8);opacity:.5}40%{transform:scale(1);opacity:1}}",""])},277:function(e,t,n){"use strict";n.r(t);n(137),n(16);var o,r,c=n(2),l=(n(91),n(92),n(17),n(227)),d={name:"ChatN8N",props:{isOpen:{type:Boolean,default:!1}},components:{Icon:l.default},data:function(){return{messages:[],newMessage:"",sessionId:Math.floor(1e6*Math.random()),sending:!1,hasAskedInitialQuestion:!1,isFirstTimeOpening:!0}},methods:{loadMessages:function(){try{var e=sessionStorage.getItem("chatMessages");e&&(this.messages=JSON.parse(e)),"true"===sessionStorage.getItem("hasAskedInitialQuestion")&&(this.hasAskedInitialQuestion=!0);var t=sessionStorage.getItem("chatSessionId");t&&(this.sessionId=parseInt(t))}catch(e){console.error("Error loading messages:",e)}},saveMessages:function(){try{sessionStorage.setItem("chatMessages",JSON.stringify(this.messages)),sessionStorage.setItem("hasAskedInitialQuestion",this.hasAskedInitialQuestion.toString()),sessionStorage.setItem("chatSessionId",this.sessionId.toString())}catch(e){console.error("Error saving messages:",e)}},clearSessionData:function(){try{sessionStorage.removeItem("chatMessages"),sessionStorage.removeItem("hasAskedInitialQuestion"),sessionStorage.removeItem("chatSessionId")}catch(e){console.error("Error clearing session data:",e)}},sendMessage:(r=Object(c.a)(regeneratorRuntime.mark((function e(){var t,n,data,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.newMessage.trim()&&!this.sending){e.next=2;break}return e.abrupt("return");case 2:return t=this.newMessage.trim(),this.newMessage="",this.messages.push({type:"user",text:t,time:(new Date).toLocaleTimeString()}),this.sending=!0,e.prev=6,e.next=9,new Promise((function(e){return setTimeout(e,1500+1e3*Math.random())}));case 9:return e.next=11,fetch("https://n8n.mipigu.com/webhook/b3729be4-dd16-4bfd-bf61-f50f9caa406f/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chatInput:t,sessionId:this.sessionId,timestamp:(new Date).toISOString()})});case 11:if(!(n=e.sent).ok){e.next=19;break}return e.next=15,n.json();case 15:data=e.sent,this.messages.push({type:"bot",text:data.output||"Thanks for your message! I'll get back to you soon.",time:(new Date).toLocaleTimeString()}),e.next=20;break;case 19:throw new Error("Failed to send message");case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(6),console.error("Error sending message:",e.t0),this.messages.push({type:"bot",text:"Sorry, I'm having trouble connecting right now. Please try again later.",time:(new Date).toLocaleTimeString()});case 26:return e.prev=26,this.sending=!1,this.saveMessages(),this.$nextTick((function(){o.scrollToBottom()})),e.finish(26);case 31:case"end":return e.stop()}}),e,this,[[6,22,26,31]])}))),function(){return r.apply(this,arguments)}),scrollToBottom:function(){var e=this.$refs.messagesContainer;e&&e.scrollTo({top:e.scrollHeight,behavior:"smooth"})},closeChat:function(){this.$emit("close")},isEmoji:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"!=typeof e)return!1;var t=/^(?:[\u2700-\u27BF]|(?:\uD83C[\uDDE6-\uDDFF]){2}|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\u0023-\u0039]\uFE0F?\u20E3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|[\ud83c[\ude32-\ude3a]|[\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff]){1,3}$/g;return!!e.match(t)},askInitialQuestion:function(){this.hasAskedInitialQuestion||(this.hasAskedInitialQuestion=!0,this.saveMessages(),this.autoSendMessage("The user has just opened the chat, please introduce yourself in a gracious manner and ask about their name"))},autoSendMessage:function(e){var t=this;this.sending=!0,this.sendToWebhook(e),this.$nextTick((function(){t.scrollToBottom()}))},sendToWebhook:(o=Object(c.a)(regeneratorRuntime.mark((function e(t){var n,data,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://n8n.mipigu.com/webhook/b3729be4-dd16-4bfd-bf61-f50f9caa406f/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chatInput:t,sessionId:this.sessionId,timestamp:(new Date).toISOString()})});case 3:if(!(n=e.sent).ok){e.next=11;break}return e.next=7,n.json();case 7:data=e.sent,this.messages.push({type:"bot",text:data.output||"Thanks for your message! I'll get back to you soon.",time:(new Date).toLocaleTimeString()}),e.next=12;break;case 11:throw new Error("Failed to send message");case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.error("Error sending message:",e.t0),this.messages.push({type:"bot",text:"Sorry, I'm having trouble connecting right now. Please try again later.",time:(new Date).toLocaleTimeString()});case 18:return e.prev=18,this.sending=!1,this.saveMessages(),this.$nextTick((function(){o.scrollToBottom()})),e.finish(18);case 23:case"end":return e.stop()}}),e,this,[[0,14,18,23]])}))),function(e){return o.apply(this,arguments)})},watch:{messages:{handler:function(){var e=this;this.$nextTick((function(){e.scrollToBottom()}))},deep:!0},isOpen:function(e,t){e&&!t&&(console.log("Chat opened - checking for initial question"),this.loadMessages(),this.askInitialQuestion())}},mounted:function(){console.log("ChatN8N component mounted"),this.loadMessages(),window.addEventListener("beforeunload",this.clearSessionData)},beforeDestroy:function(){window.removeEventListener("beforeunload",this.clearSessionData),this.clearSessionData()}},f=(n(265),n(267),n(13)),component=Object(f.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"h-full relative bg-chat"},[n("div",{staticClass:"h-full flex flex-col justify-between"},[n("div",{staticClass:"md:hidden fixed top-0 w-full flex justify-end z-10 form-bg"},[n("button",{staticClass:"mx-2 my-2 text-white",attrs:{"aria-label":"close chat"},on:{click:e.closeChat}},[n("Icon",{staticClass:"h-full",attrs:{icon:"arrow-right"}})],1)]),e._v(" "),n("div",{ref:"messagesContainer",staticClass:"flex-grow overflow-x-hidden overflow-y-auto scrolling-touch w-full pt-12 md:pt-8 px-2 md:pb-4 remove-scrollbar",staticStyle:{"overscroll-behavior-y":"contain"},attrs:{id:"scroller"}},[n("transition-group",{staticClass:"h-full",attrs:{name:"list",tag:"div"}},[e._l(e.messages,(function(t,o){return n("div",{key:o+"-"+t.text,staticClass:"chat-item w-full flex",class:"user"===t.type?"justify-end text-right":"justify-left"},[e.isEmoji(t.text,3)?n("div",{staticClass:"p-1 mx-1"},[n("p",{staticClass:"text-5xl"},[e._v(e._s(t.text))]),e._v(" "),n("p",{staticClass:"text-xs opacity-60 ml-1"},[e._v(e._s(t.time))])]):n("div",{staticClass:"px-4 py-3 text-sm bg-message m-2 block max-w-2/3 rounded-lg"},[n("p",{staticClass:"p-1"},[e._v(e._s(t.text))]),e._v(" "),n("p",{staticClass:"text-xs opacity-60 ml-1"},[e._v(e._s(t.time))])])])})),e._v(" "),e.sending?n("div",{key:"typing",staticClass:"chat-item w-full flex justify-left"},[n("div",{staticClass:"px-4 py-2 text-sm bg-message m-2 block rounded-full"},[n("div",{staticClass:"typing-dots"},[n("span",{staticClass:"dot"}),e._v(" "),n("span",{staticClass:"dot"}),e._v(" "),n("span",{staticClass:"dot"})])])]):e._e(),e._v(" "),e.$refs.form?n("div",{key:"last",staticClass:"md:hidden",style:{height:e.$refs.form.clientHeight+10+"px"}}):e._e()],2)],1),e._v(" "),n("div",{staticClass:"bg-blue-100 border-b border-blue-300 px-4 py-3 text-sm text-blue-800 mx-5 mt-2 rounded"},[n("div",{staticClass:"flex items-center"},[n("Icon",{staticClass:"mr-2 text-blue-600",attrs:{icon:"exclamation-circle"}}),e._v(" "),e._m(0)],1)]),e._v(" "),n("form",{ref:"form",staticClass:"w-full fixed md:relative bottom-0 form-bg py-3",on:{submit:function(t){return t.preventDefault(),e.sendMessage(t)}}},[n("div",{staticClass:"flex items-center bg-white mx-4 p-1 md:p-2 rounded-full"},[n("span",{staticClass:"dot bg-green-light"}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newMessage,expression:"newMessage"}],staticClass:"resize-none appearance-none bg-transparent border-none w-full mr-3 py-1 px-4 leading-tight focus:outline-none text-lg",attrs:{disabled:e.sending,"aria-label":"chat input",placeholder:"Write here"},domProps:{value:e.newMessage},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMessage(t)},input:function(t){t.target.composing||(e.newMessage=t.target.value)}}}),e._v(" "),n("button",{staticClass:"send-button py-2 focus:outline-none",attrs:{type:"button","aria-label":"send message",disabled:e.sending||!e.newMessage.trim()},on:{click:function(t){return t.preventDefault(),e.sendMessage(t)}}},[n("Icon",{attrs:{spin:e.sending,icon:e.sending?"cog":"paper-plane"}})],1)])])])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("span",[t("strong",[this._v("AI-Powered Chat:")]),this._v(" I do not have control over the responses, they might not represent my personal opinions.\n        ")])}],!1,null,"11f4c692",null);t.default=component.exports}}]);