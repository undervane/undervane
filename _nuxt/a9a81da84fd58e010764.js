(window.webpackJsonp=window.webpackJsonp||[]).push([[8,11],{226:function(t,e,n){var content=n(232);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(23).default)("4e28b6b7",content,!0,{sourceMap:!1})},227:function(t,e,n){"use strict";n.r(e);var o={props:{icon:String|Array,to:String,link:{type:String,default:function(){return""}},spin:Boolean,theme:String}},r=(n(231),n(13)),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.to?n("nuxt-link",{staticClass:"link",class:t.theme,attrs:{to:t.to}},[n("font-awesome-icon",{staticClass:"icon",attrs:{icon:t.icon,spin:t.spin}})],1):t.link?n("a",{staticClass:"link",class:t.theme,attrs:{target:"_blank",href:t.link,rel:"noopener","aria-label":t.link}},[n("font-awesome-icon",{staticClass:"icon",attrs:{icon:t.icon,spin:t.spin}})],1):n("div",{staticClass:"link",class:t.theme},[n("font-awesome-icon",{staticClass:"icon",attrs:{icon:t.icon,spin:t.spin}})],1)}),[],!1,null,"587b32c5",null);e.default=component.exports},231:function(t,e,n){"use strict";var o=n(226);n.n(o).a},232:function(t,e,n){(t.exports=n(22)(!1)).push([t.i,".text-light-transition[data-v-587b32c5]{transition:color 2s}@-webkit-keyframes fadeIn-data-v-587b32c5{0%{opacity:0}to{opacity:1}}@keyframes fadeIn-data-v-587b32c5{0%{opacity:0}to{opacity:1}}.page-enter-active[data-v-587b32c5],.page-leave-active[data-v-587b32c5]{transition:opacity .3s ease}.page-enter[data-v-587b32c5]{opacity:0}.page-enter-to[data-v-587b32c5]{opacity:1}.page-leave[data-v-587b32c5],.page-leave-to[data-v-587b32c5]{opacity:0}*[data-v-587b32c5]{font-family:Open Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif}body[data-v-587b32c5],html[data-v-587b32c5]{scroll-behavior:smooth}h1[data-v-587b32c5]{font-size:2em;font-weight:700}.highlight-disable[data-v-587b32c5]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.link[data-v-587b32c5]{transition:color .5s cubic-bezier(.2,.8,.2,1)}.link .icon[data-v-587b32c5]{height:1em;width:1em}.secondary[data-v-587b32c5]{color:#c7d6dc}.secondary[data-v-587b32c5]:hover{color:#4a90e2}",""])},238:function(t,e,n){var content=n(266);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(23).default)("3a537156",content,!0,{sourceMap:!1})},239:function(t,e,n){var content=n(268);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(23).default)("4a5fb0c1",content,!0,{sourceMap:!1})},265:function(t,e,n){"use strict";var o=n(238);n.n(o).a},266:function(t,e,n){(t.exports=n(22)(!1)).push([t.i,".text-light-transition{transition:color 2s}@-webkit-keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.page-enter-active,.page-leave-active{transition:opacity .3s ease}.page-enter{opacity:0}.page-enter-to{opacity:1}.page-leave,.page-leave-to{opacity:0}*{font-family:Open Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif}body,html{scroll-behavior:smooth}h1{font-size:2em;font-weight:700}.highlight-disable{-webkit-tap-highlight-color:rgba(0,0,0,0)}.remove-scrollbar::-webkit-scrollbar{width:0;height:0;background:transparent}",""])},267:function(t,e,n){"use strict";var o=n(239);n.n(o).a},268:function(t,e,n){(t.exports=n(22)(!1)).push([t.i,".text-light-transition[data-v-11f4c692]{transition:color 2s}@-webkit-keyframes fadeIn-data-v-11f4c692{0%{opacity:0}to{opacity:1}}@keyframes fadeIn-data-v-11f4c692{0%{opacity:0}to{opacity:1}}.page-enter-active[data-v-11f4c692],.page-leave-active[data-v-11f4c692]{transition:opacity .3s ease}.page-enter[data-v-11f4c692]{opacity:0}.page-enter-to[data-v-11f4c692]{opacity:1}.page-leave[data-v-11f4c692],.page-leave-to[data-v-11f4c692]{opacity:0}*[data-v-11f4c692]{font-family:Open Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif}body[data-v-11f4c692],html[data-v-11f4c692]{scroll-behavior:smooth}h1[data-v-11f4c692]{font-size:2em;font-weight:700}.highlight-disable[data-v-11f4c692]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.bg-chat[data-v-11f4c692]{background:#167ef6}.bg-message[data-v-11f4c692]{background-color:azure}.form-bg[data-v-11f4c692]{background:#167ef6}.bg-green-light[data-v-11f4c692]{background:#38c172}.dot[data-v-11f4c692]{width:11px;height:8px;margin-left:10px;margin-top:2px}.dot[data-v-11f4c692],.send-button[data-v-11f4c692]{border-radius:9999px}.send-button[data-v-11f4c692]{background-color:#009cf5;margin-right:1px;padding-left:.75rem;padding-right:.75rem;flex-shrink:0;color:#fff}.list-enter-active[data-v-11f4c692],.list-leave-active[data-v-11f4c692]{transition:all .8s}.list-enter[data-v-11f4c692]:not(.justify-end),.list-leave-to[data-v-11f4c692]:not(.justify-end){opacity:0;transform:translateX(-30px)}.list-enter.justify-end[data-v-11f4c692],.list-leave-to.justify-end[data-v-11f4c692]{opacity:0;transform:translateX(30px)}#scroller *[data-v-11f4c692]{overflow-anchor:none}.typing-dots[data-v-11f4c692]{display:flex;grid-gap:4px;gap:4px;align-items:center;padding:5px 0}.typing-dots .dot[data-v-11f4c692]{width:8px;height:8px;border-radius:50%;background:#009cf5;-webkit-animation:bounce-data-v-11f4c692 1.4s ease-in-out infinite;animation:bounce-data-v-11f4c692 1.4s ease-in-out infinite;margin:0}.typing-dots .dot[data-v-11f4c692]:first-child{-webkit-animation-delay:-.32s;animation-delay:-.32s}.typing-dots .dot[data-v-11f4c692]:nth-child(2){-webkit-animation-delay:-.16s;animation-delay:-.16s}.typing-dots .dot[data-v-11f4c692]:nth-child(3){-webkit-animation-delay:0s;animation-delay:0s}@-webkit-keyframes bounce-data-v-11f4c692{0%,80%,to{transform:scale(.8);opacity:.5}40%{transform:scale(1);opacity:1}}@keyframes bounce-data-v-11f4c692{0%,80%,to{transform:scale(.8);opacity:.5}40%{transform:scale(1);opacity:1}}",""])},277:function(t,e,n){"use strict";n.r(e);n(137),n(16);var o,r,c=n(2),l=(n(91),n(92),n(17),n(227)),d={name:"ChatN8N",props:{isOpen:{type:Boolean,default:!1}},components:{Icon:l.default},data:function(){return{messages:[],newMessage:"",sessionId:Math.floor(1e6*Math.random()),sending:!1,hasAskedInitialQuestion:!1,isFirstTimeOpening:!0}},methods:{loadMessages:function(){try{var t=sessionStorage.getItem("chatMessages");t&&(this.messages=JSON.parse(t)),"true"===sessionStorage.getItem("hasAskedInitialQuestion")&&(this.hasAskedInitialQuestion=!0);var e=sessionStorage.getItem("chatSessionId");e&&(this.sessionId=parseInt(e))}catch(t){console.error("Error loading messages:",t)}},saveMessages:function(){try{sessionStorage.setItem("chatMessages",JSON.stringify(this.messages)),sessionStorage.setItem("hasAskedInitialQuestion",this.hasAskedInitialQuestion.toString()),sessionStorage.setItem("chatSessionId",this.sessionId.toString())}catch(t){console.error("Error saving messages:",t)}},clearSessionData:function(){try{sessionStorage.removeItem("chatMessages"),sessionStorage.removeItem("hasAskedInitialQuestion"),sessionStorage.removeItem("chatSessionId")}catch(t){console.error("Error clearing session data:",t)}},sendMessage:(r=Object(c.a)(regeneratorRuntime.mark((function t(){var e,n,data,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.newMessage.trim()&&!this.sending){t.next=2;break}return t.abrupt("return");case 2:return e=this.newMessage.trim(),this.newMessage="",this.messages.push({type:"user",text:e,time:(new Date).toLocaleTimeString()}),this.sending=!0,t.prev=6,t.next=9,new Promise((function(t){return setTimeout(t,1500+1e3*Math.random())}));case 9:return t.next=11,fetch("https://n8n.mipigu.com/webhook/b3729be4-dd16-4bfd-bf61-f50f9caa406f/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chatInput:e,sessionId:this.sessionId,timestamp:(new Date).toISOString()})});case 11:if(!(n=t.sent).ok){t.next=19;break}return t.next=15,n.json();case 15:data=t.sent,this.messages.push({type:"bot",text:data.output||"Thanks for your message! I'll get back to you soon.",time:(new Date).toLocaleTimeString()}),t.next=20;break;case 19:throw new Error("Failed to send message");case 20:t.next=26;break;case 22:t.prev=22,t.t0=t.catch(6),console.error("Error sending message:",t.t0),this.messages.push({type:"bot",text:"Sorry, I'm having trouble connecting right now. Please try again later.",time:(new Date).toLocaleTimeString()});case 26:return t.prev=26,this.sending=!1,this.saveMessages(),this.$nextTick((function(){o.scrollToBottom()})),t.finish(26);case 31:case"end":return t.stop()}}),t,this,[[6,22,26,31]])}))),function(){return r.apply(this,arguments)}),scrollToBottom:function(){var t=this.$refs.messagesContainer;t&&t.scrollTo({top:t.scrollHeight,behavior:"smooth"})},closeChat:function(){this.$emit("close")},isEmoji:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"!=typeof t)return!1;var e=/^(?:[\u2700-\u27BF]|(?:\uD83C[\uDDE6-\uDDFF]){2}|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\u0023-\u0039]\uFE0F?\u20E3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|[\ud83c[\ude32-\ude3a]|[\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff]){1,3}$/g;return!!t.match(e)},askInitialQuestion:function(){this.hasAskedInitialQuestion||(this.hasAskedInitialQuestion=!0,this.saveMessages(),this.autoSendMessage("The user has just opened the chat, please introduce yourself in a gracious manner and ask about their name"))},autoSendMessage:function(t){var e=this;this.sending=!0,this.sendToWebhook(t),this.$nextTick((function(){e.scrollToBottom()}))},sendToWebhook:(o=Object(c.a)(regeneratorRuntime.mark((function t(e){var n,data,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://n8n.mipigu.com/webhook/b3729be4-dd16-4bfd-bf61-f50f9caa406f/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chatInput:e,sessionId:this.sessionId,timestamp:(new Date).toISOString()})});case 3:if(!(n=t.sent).ok){t.next=11;break}return t.next=7,n.json();case 7:data=t.sent,this.messages.push({type:"bot",text:data.output||"Thanks for your message! I'll get back to you soon.",time:(new Date).toLocaleTimeString()}),t.next=12;break;case 11:throw new Error("Failed to send message");case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),console.error("Error sending message:",t.t0),this.messages.push({type:"bot",text:"Sorry, I'm having trouble connecting right now. Please try again later.",time:(new Date).toLocaleTimeString()});case 18:return t.prev=18,this.sending=!1,this.saveMessages(),this.$nextTick((function(){o.scrollToBottom()})),t.finish(18);case 23:case"end":return t.stop()}}),t,this,[[0,14,18,23]])}))),function(t){return o.apply(this,arguments)})},watch:{messages:{handler:function(){var t=this;this.$nextTick((function(){t.scrollToBottom()}))},deep:!0},isOpen:function(t,e){t&&!e&&(console.log("Chat opened - checking for initial question"),this.loadMessages(),this.askInitialQuestion())}},mounted:function(){console.log("ChatN8N component mounted"),this.loadMessages(),window.addEventListener("beforeunload",this.clearSessionData)},beforeDestroy:function(){window.removeEventListener("beforeunload",this.clearSessionData),this.clearSessionData()}},f=(n(265),n(267),n(13)),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"h-full relative bg-chat"},[n("div",{staticClass:"h-full flex flex-col justify-between"},[n("div",{staticClass:"md:hidden fixed top-0 w-full flex justify-end z-10 form-bg"},[n("button",{staticClass:"mx-2 my-2 text-white",attrs:{"aria-label":"close chat"},on:{click:t.closeChat}},[n("Icon",{staticClass:"h-full",attrs:{icon:"arrow-right"}})],1)]),t._v(" "),n("div",{ref:"messagesContainer",staticClass:"flex-grow overflow-x-hidden overflow-y-auto scrolling-touch w-full pt-12 md:pt-8 px-2 md:pb-4 remove-scrollbar",staticStyle:{"overscroll-behavior-y":"contain"},attrs:{id:"scroller"}},[n("transition-group",{staticClass:"h-full",attrs:{name:"list",tag:"div"}},[t._l(t.messages,(function(e,o){return n("div",{key:o+"-"+e.text,staticClass:"chat-item w-full flex",class:"user"===e.type?"justify-end text-right":"justify-left"},[t.isEmoji(e.text,3)?n("div",{staticClass:"p-1 mx-1"},[n("p",{staticClass:"text-5xl"},[t._v(t._s(e.text))]),t._v(" "),n("p",{staticClass:"text-xs opacity-60 ml-1"},[t._v(t._s(e.time))])]):n("div",{staticClass:"px-4 py-3 text-sm bg-message m-2 block max-w-2/3 rounded-lg"},[n("p",{staticClass:"p-1"},[t._v(t._s(e.text))]),t._v(" "),n("p",{staticClass:"text-xs opacity-60 ml-1"},[t._v(t._s(e.time))])])])})),t._v(" "),t.sending?n("div",{key:"typing",staticClass:"chat-item w-full flex justify-left"},[n("div",{staticClass:"px-4 py-2 text-sm bg-message m-2 block rounded-full"},[n("div",{staticClass:"typing-dots"},[n("span",{staticClass:"dot"}),t._v(" "),n("span",{staticClass:"dot"}),t._v(" "),n("span",{staticClass:"dot"})])])]):t._e(),t._v(" "),t.$refs.form?n("div",{key:"last",staticClass:"md:hidden",style:{height:t.$refs.form.clientHeight+10+"px"}}):t._e()],2)],1),t._v(" "),n("div",{staticClass:"bg-blue-100 border-b border-blue-300 px-4 py-3 text-sm text-blue-800 mx-5 mt-2 rounded"},[n("div",{staticClass:"flex items-center"},[n("Icon",{staticClass:"mr-2 text-blue-600",attrs:{icon:"exclamation-circle"}}),t._v(" "),t._m(0)],1)]),t._v(" "),n("form",{ref:"form",staticClass:"w-full fixed md:relative bottom-0 form-bg py-3",on:{submit:function(e){return e.preventDefault(),t.sendMessage(e)}}},[n("div",{staticClass:"flex items-center bg-white mx-4 p-1 md:p-2 rounded-full"},[n("span",{staticClass:"dot bg-green-light"}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.newMessage,expression:"newMessage"}],staticClass:"resize-none appearance-none bg-transparent border-none w-full mr-3 py-1 px-4 leading-tight focus:outline-none text-lg",attrs:{disabled:t.sending,"aria-label":"chat input",placeholder:"Write here"},domProps:{value:t.newMessage},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendMessage(e)},input:function(e){e.target.composing||(t.newMessage=e.target.value)}}}),t._v(" "),n("button",{staticClass:"send-button py-2 focus:outline-none",attrs:{type:"button","aria-label":"send message",disabled:t.sending||!t.newMessage.trim()},on:{click:function(e){return e.preventDefault(),t.sendMessage(e)}}},[n("Icon",{attrs:{spin:t.sending,icon:t.sending?"cog":"paper-plane"}})],1)])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("strong",[this._v("AI-Powered Chat:")]),this._v(" I do not have control over the responses, they might not represent my personal opinions.\n        ")])}],!1,null,"11f4c692",null);e.default=component.exports}}]);